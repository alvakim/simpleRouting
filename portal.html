<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Portal sample</title>
	<style>
		body{
			font-family: Verdana, Arial, Sans-Serif;
			font-size:14px;
			background-color:#012;
			color:#ffe;
			--link-color: #8bb;
			--link-hicolor: #8f8;
		}
		.link{cursor: pointer;}
		.link{color:var(--link-color);}
		.link:hover{color:var(--link-hicolor);}
		a:link{color:var(--link-color);}
		a:visited{color:var(--link-color);}
		a:hover{color:var(--link-hicolor);}
	</style>
	<script src="js/portal.js" type="module"></script>
</head>
<body>
	<h1>Portal sample</h1>
	<div><a href="index.html">Simple Routing Sample</a></div>
	<div id="main"></div>
	<div class="docs">
		<h2>Описание архитектуры</h2>
		<p>Главное меню формируется роутером, объявленным в модуле <code>js/portal.js</code>.</p>
		<p>Разделы "Учреждение" и "Сотрудники" формируются модулями, размещенными в директории <code>portal</code>. Первый модуль жестко импортируется в <code>js/portal.js</code>, второй загружается динамически по первому требованию. Оба данных модуля содержат подменю, формируемые локальными роутерами, объявленными в этих модулях.</p>
		<p>Виджет "Selected" содержит жестко закодированные гиперссылки на ресурсы модуля "Сотрудники". Переход по этим ссылкам вызывает навигацию по главному роутеру, вызывающий загрузку соотвествующего модуля, и далее навигацию по локальному роутеру загруженного модуля.</p>
		<p>Список сотрудников в разделе "Сотрудники / Телефонный справочник" формируется в виде гиперссылок (тег A). Сам этот список не является меню, но при клике на гиперссылки происходит не только отработка внутреннего алгоритма модуля, но и изменение параметра hash строки запроса браузера (страница при этом не перезагружается). Если скопировать адрес гиперссылки, и вставить в адресную строку браузера, произойдет навигация по цепочке роутеров до выбранной карточки сотрудника.</p>
		<h2>Создание меню</h2>
		<p>Для создания меню следует создать роутер вызовом функции <code>Router()</code>, которой передаются настройки роутера, в числе которых селектор панели для отображения контента, карта меню и коллекция обработчиков, вызываемых по клику на соответствующем пункте меню.</p>
		<p>Формирование DOM-элемента меню осуществляется вызовом метода <code>router.buildMenu()</code>. После загрузки страницы или модуля, содержащего данный роутер, следует произвести инициализацию роутера вызовом метода <code>router.init()</code>.</p>
		<p>Для обрабочиков событий элементов страницы также доступен метод <code>router.route()</code>, выполняющие навигацию по заданному пути. Значение пути для подобной навигации можно получить вызовом метода <code>router.buildPath()</code>.</p>
		<p>Методы экземпляра роутера:</p>
		<ul>
			<li><code>init(path)</code> - инициализация роутера, следует выполнять после загрузки страницы или программного модуля</li>
			<li><code>buildMenu(pnl, rootID)</code> - формирование меню внутри DOM-элемента <code>pnl</code>, <code>rootID</code> - идентификатор ветки карты меню</li>
			<li><code>buildPath(...args)</code> - формирует сроку пути из элементов данных, переданных в аргументах метода</li>
			<li><code>route(path)</code> - вызывает навигацию по заданному пути</li>
		</ul>
	</div>
</body>
</html>
